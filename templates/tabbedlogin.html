{% extends "base.html" %}
{% block content %}
    <div style="width:500px">
        <div class="tabgroup">
            <input type="radio" id="tabSignIn" name="tabgroup">
            <label for="tabSignIn">Sign In</label>
            <div class="tabcontent">
                <form action="{% url 'login' %}" method="post">
                    {% csrf_token %}
                    <table>{{ signin_form.as_table }}</table>
                    <div class="ml-0 mt-2">
                        <button type="submit" name="btnSignIn" class="btn-sm btn-primary">SIGN IN</button>
                    </div>
                </form>
            </div>

            <input type="radio" id="tabSignUp" name="tabgroup">
            <label for="tabSignUp">New User</label>
            <div class="tabcontent">
                <form action="{% url 'signup' %}" method="post">
                    {% csrf_token %}
                    <table>{{ signup_form.as_table }}</table>
                    <div class="ml-0 mt-2">
                        <button type="submit" name="btnSignUp" class="btn-sm btn-primary">SIGN UP</button>
                    </div>
                </form>
            </div>

            <input type="radio" id="tabReset" name="tabgroup">
            <label for="tabReset">Reset Password</label>
            <div class="tabcontent">
                <div id="reset" style="display:none">
                    <p>Forgot your password? Enter your email address below, and we'll email reset instructions.</p>
                    <form action="{% url 'reset' %}" method="post">
                        {% csrf_token %}
                        <table>{{ forgot_form.as_table }}</table>
                        <div class="ml-0 mt-2">
                            <button type="submit" name="btnSendEmail" class="btn-sm btn-primary">SEND EMAIL</button>
                        </div>
                    </form>
                </div>
                <div id="resetDone" style="display:none">
                    <p>We've emailed you instructions for resetting your password, if an account exists
                    with the email you entered. If you don't receive an email, please make sure
                    you've entered the address you registered with, and check your spam folder.</p>
                </div>
                <div id="changePswd" style="display:none">
                    <p>Please enter your new password.</p>
                    <form action="{% url 'reset' %}" method="post">
                        {% csrf_token %}
                        <table>{{ forgot_form.as_table }}</table>
                        <div class="ml-0 mt-2">
                            <button type="submit" name="btnEmailMe" class="btn-sm btn-primary">RESET PASSWORD</button>
                        </div>
                    </form>
                </div>
                <div id="changePswdDone" style="display:none">
                    <p>Your password has been reset. Please log in now.</p>
                    <a href="{% url 'login' %}">Log in</a>
                </div>
            </div>
        </div>
    </div>
    <script>
        $(document).ready(function() {
            let currentUrl = $(location).attr('href'), tabId, resetDivId = "#reset";
            if ( currentUrl.includes('/login') ) tabId = "#tabSignIn";
            else if ( currentUrl.includes('/signup') ) tabId = "#tabSignUp";
            else if ( currentUrl.includes('/reset') ) tabId = "#tabReset";
            if ( currentUrl.includes('/reset_done') ) resetDivId = "#resetDone";
            else if ( currentUrl.includes('/change_pswd') ) resetDivId = "#changePswd";
            else if ( currentUrl.includes('/change_pswd_done')) resetDivId = "#changePswdDone";
            $(tabId).prop('checked','checked');
            $(resetDivId).show();
        });
    </script>
{% endblock %}