{% extends "base.html" %}
{% block content %}
    <div class="d-inline-block">
        <div class="m-0 row mt-2 mb-2">
            <h2 class="pl-2 pb-0 mb-0">Preview Puzzle #{{ id }}</h2>
            {% if err_msg == None %}
                <a href="{% url 'home' %}" class="ml-auto btn btn-dark">DONE</a>
            {% endif %}
        </div>
        <div class="ml-2 mb-3">
          <input type="checkbox" value="" id="showAnswers" checked>
          <label class="h5" for="showAnswers">Show answers and parsing</label>
        </div>
        <div class="m-2 bg-light p-4">
            {% if err_msg == None %}
                <div class="h5 mb-0"><b>{{ title }}</b></div>
                <div class="h6 mb-2">Posted by: {{ puzzle.editor }}</div>
                {% if puzzle.desc != None and puzzle.desc != "" %}
                    <div class="h6 text-dark">Description: {{ puzzle.desc }}</div>
                {% endif %}
                <div class="h5 m-0 row">
                    <div><b>Clues</b></div><div class="ml-auto"><b>Pts</b></div>
                </div>

                <table class="table table-responsive-sm mt-1 p-0">
                {% for clue in clues %}
                    <tr>
                        <td>{{ clue.clue_num }}.</td>
                        <td>
                            <div class="text-wrap" style="line-height:normal">{{ clue.clue_text }}</div>
                            <div class="h6 answer text-wrap pt-1">[<b>{{ clue.answer }}</b>] {{ clue.parsing }}</div>
                        </td>
                        <td>[{{ clue.points }}]</td>
                    </tr>
                {% endfor %}
                </table>
            {% else %}
                <div id="errMsg" class="text-danger mb-3">{{ err_msg }}</div>
                <a href="{% url 'home' %}" class="btn btn-primary">OK</a>
            {% endif %}
        </div>
    </div>

    <script>
    $(document).ready(function(){
        $('#showAnswers').change(function() {
            if ( this.checked ) $('.answer').show();
            else $('.answer').hide();
        })
    })
    </script>
{% endblock %}