{% extends "base.html" %}
{% block content %}
<div style="width:500px">
    {% load static %}
    <button id="home" class="btn btn-sm mb-2 btn-primary rounded-lg"><< Back to Home Page</button>
    <div class="row m-0">
        <h4 class="col p-0" id="page-title"></h4>
        <i id="save-ok" class="mr-2 fa fa-check-circle fa-2x" style="color:green; display:none"></i>
        <div style="height:30px">
            <button id="save" class="btn btn-sm ml-1 btn-primary rounded-lg">Save</button>
            <button id="delete" class="btn btn-sm ml-1 btn-danger rounded-lg">Delete</button>
            <button id="share" class="btn btn-sm ml-1 btn-primary rounded-lg">Publish</button>
        </div>
    </div>

    <!-- PUZZLE DESCRIPTION & SHARING -->
    <div class="p-0">
        <label class="h6" for="desc">Description: </label><br />
        <input class="mb-2" id="desc" type="text" style="width:100%" />
    </div>
{#    <div id="share-form" class="p-1" style="display:none">#}
{#        <span class="h6">Share Puzzle: </span>#}
{#        <label class="switch">#}
{#            <input id="share-toggle" type="checkbox">#}
{#            <span class="slider round"></span>#}
{#        </label>#}
{#        <span data-toggle="tooltip"#}
{#              title="Enabled only after clues are complete. Save your setting to activate it.">#}
{#            <i class="fa fa-question-circle fa-lg"></i>#}
{#        </span>#}
{#        <small class="text-muted">Makes puzzle accessible to users</small>#}
{#    </div>#}

    <!-- NAVBAR WITH SIZE SELECTION, RESET AND SAVE -->
    <div class="row bg-light border border-secondary rounded-lg shadow-sm p-2 m-0" style="width:100%">
        <label id="size-label" class="h6 mt-2" for="size"></label>
        <select id="size" class="h6 ml-2 col-2 custom-select border border-secondary"></select>
        <label for="mode-toggle" class="h6 ml-3 mt-2 mr-2">Mode:</label>
        <input id="mode-toggle" type="checkbox" data-toggle="toggle" data-width=110 data-height=26
               data-onstyle="warning" data-offstyle="dark" data-off="Edit Blocks" data-on="Edit Clues" />
        <span class="ml-2 mt-1" id="symm-option" style="display:none">
            <label class="h6 ml-2" for="symm-toggle">Symmetry:</label>
            <label class="switch">
                <input id="symm-toggle" type="checkbox" checked>
                <span class="slider round"></span>
            </label>
        </span>
    </div>

    <div class="m-0 mt-2" style="width:100%">
        <!-- WORD & CLUE INPUT FORM -->
        <div id="clue-form" class="row m-0 p-2 pb-1" style="width:100%; border:1px solid darkgray;
            border-radius:5px; background-color: lightyellow; display: none">
            <div style="width:150px">
                <label for="clue-word" id="clue-num" class="h6">TEXT</label><br />
                <input id="clue-word" class="form-control" type="text"/><br />
            </div>
            <div class="ml-2">
                <label for="clue-text" class="h6">Enter Clue</label><br />
                <textarea id="clue-text" cols="25"></textarea>
            </div>
            <div class="ml-2">
                <button id="clue-update" class="mt-2 p-2 badge badge-dark">Update</button><br />
                <button id="clue-delete" class="mt-2 p-2 badge badge-danger">Remove</button>
            </div>
            <div id="clue-msg" class="h6 red-text"></div>
        </div>

        <!-- CROSSWORD GRID -->
        <div class="m-1 mt-3" id="puzzle"></div>
    </div>

    <script src="{% static '/javascript/puzzle.js' %}"></script>
    <script src="{% static '/javascript/puzzle_editor.js' %}"></script>
    <script src="{% static '/javascript/crossword_editor.js' %}"></script>
    <script src="{% static '/javascript/crossword.js' %}"></script>

    <script>
        $.ajaxSetup({
            data: {csrfmiddlewaretoken: '{{ csrf_token }}' },
}       );
        $(document).ready(function() {
            try {
                var puzzleData = JSON.parse('{{ data | safe }}');
                var editor;
                if (puzzleData.is_xword) editor = new CrosswordEditor();
                editor.initialize(puzzleData);
                editor.setUnloadHandler();
            } catch(e) {
                alert(e);
            }
        });
    </script>
</div>
{% endblock %}