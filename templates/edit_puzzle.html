{% extends "base.html" %}
{% block content %}

    {% load static %}
    <h3> {{ title }} </h3>

    <!-- PAGE-SPECIFIC NAVBAR WITH GRID SIZE SELECTION, RESET AND SAVE -->
    <div class="bg-light border border-dark rounded-lg shadow-sm p-2 mt-3" style="width:500px">
        <span class="h6">Grid Size:</span>
        <select id="grid-size" class="p-1 ml-1 mr-2">
          <option value=5>5 x 5</option>
          <option value=7>7 x 7</option>
          <option value=9>9 x 9</option>
          <option value=11>11 x 11</option>
          <option value=13>13 x 13</option>
          <option value=15 selected>15 x 15</option>
        </select>
        <input id="edit-toggle" class="ml-2" type="checkbox" data-toggle="toggle" data-width=120 data-height=30
               data-off="Edit Blocks" data-offstyle="dark" data-onstyle="warning" data-on="Edit Words">
        <button id="save-grid" class="btn btn-sm ml-1 btn-primary rounded-lg">Save</button>
        <button id="delete" class="btn btn-sm ml-1 btn-danger rounded-lg">Delete</button>
        <button id="done" class="btn btn-sm ml-1 btn-primary rounded-lg">Done</button>
    </div>

    <div class="m-0 mt-2" style="width:500px">

        <div id="mode-tip" class="tiptext"></div>

        <!-- WORD & CLUE INPUT FORM -->
        <div id="clue-form" class="row m-0 p-2" style="width:auto; border:1px solid darkgray;
            border-radius:5px; background-color: lightyellow">
            <div class="col-*">
                <span id="clue-num" class="h6 p-1"></span><br />
                <input id="clue-word" type="text"/><br />
                <button id="clue-update" class="mt-2 p-2 badge badge-dark" style="height:30px">Update Grid</button>
                <button id="clue-delete" class="mt-2 p-2 badge badge-danger" style="height:30px">Delete</button>
            </div>
            <div class="col-* ml-2">
                <span class="h6 p-1">Enter Clue</span><br />
                <textarea id="clue-text" cols="35"></textarea>
            </div>
            <div id="clue-msg" class="h6 pt-1 red-text"></div>
        </div>

        <!-- CROSSWORD GRID -->
        <div class="m-1 mt-3" id="xw-grid"></div>
    </div>
    <hr />

    <script src="{% static '/javascript/puzzle.js' %}"></script>
    <script src="{% static '/javascript/crossword_editor.js' %}"></script>
    <script src="{% static '/javascript/crossword.js' %}"></script>

    <script>
        $.ajaxSetup({
            data: {csrfmiddlewaretoken: '{{ csrf_token }}' },
}       );
        $(document).ready(function() {
            try {
                var puzzleData = {{ data | safe }};
                var xwordEditor = new CrosswordEditor("xw-grid");
                if ( puzzleData.puzzle_id === 0 ) xwordEditor.initialize();
                else xwordEditor.initialize(puzzleData);
                xwordEditor.setUnloadHandler();
            } catch(e) {
                alert(e);
            }
        });
    </script>
{% endblock %}